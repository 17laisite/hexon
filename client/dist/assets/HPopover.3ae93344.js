import{r as v,w as f,j as h,Y as C,Z as E,$ as S,_ as P,d as z,B as H,m as L,a0 as N,a1 as V,a2 as I,C as M,c as O,o as g,z as T,g as Y,h as j,b as y,f as A,l as _,i as m,O as F,a3 as U,a4 as X,a5 as Z}from"./index.2d085559.js";function q(o,e,s){let a=0,t=0,l={top:0,left:0,bottom:0,right:0};switch(o){case"top-left":a=e.left,t=e.top-s.height,l.bottom=4;break;case"top":a=e.left+e.width/2-s.width/2,t=e.top-s.height,l.bottom=4;break;case"top-right":a=e.left+e.width-s.width,t=e.top-s.height,l.bottom=4;break;case"right-top":a=e.left+e.width,t=e.top,l.left=4;break;case"right":a=e.left+e.width,t=e.top+e.height/2-s.height/2,l.left=4;break;case"right-bottom":a=e.left+e.width,t=e.top+e.height-s.height,l.left=4;break;case"bottom-left":a=e.left,t=e.top+e.height,l.top=4;break;case"bottom":a=e.left+e.width/2-s.width/2,t=e.top+e.height,l.top=4;break;case"bottom-right":a=e.left+e.width-s.width,t=e.top+e.height,l.top=4;break;case"left-top":a=e.left-s.width,t=e.top,l.right=4;break;case"left":a=e.left-s.width,t=e.top+e.height/2-s.height/2,l.right=4;break;case"left-bottom":a=e.left-s.width,t=e.top+e.height-s.height,l.right=4;break}return{x:a,y:t,margin:l}}function x(o){const e=v({left:0,top:0,height:0,width:0});return D(o,e),G(o,e),J(o,e),e}function D(o,e){f(()=>h(o),s=>{!s||(e.value=w(s))},{immediate:!0})}function G(o,e){C(o,()=>{!o.value||(e.value=w(o.value))})}function J(o,e){const s=new Map,a=()=>{for(const[,t]of s)t();s.clear()};f(()=>h(o.value),t=>{if(a(),!t)return;const l=new Set;let u=t;for(;u=E(u),u!==null;)l.add(u);for(const i of[...l,window]){const d=()=>{!o.value||(e.value=w(o.value))};i.addEventListener("resize",d),s.set(d,()=>{i.removeEventListener("resize",d)})}},{immediate:!0}),S(()=>{a()})}function w(o){const{left:e,top:s,height:a,width:t}=o.getBoundingClientRect();return{left:e,top:s,height:a,width:t}}const K=z({props:{show:{type:Boolean,default:!1},position:{default:"top"},persistent:{type:Boolean,default:!1},trigger:{default:"click"},raw:{type:Boolean,default:!1},duration:null},emits:["update:show"],setup(o,{emit:e}){const s=o,{show:a}=H(s),t=v(!1);f(()=>a.value,r=>{t.value=r}),f(()=>t.value,r=>{e("update:show",r)});const l=Z(),u=v(null),i=v(null);L(()=>{var r;u.value=(r=l==null?void 0:l.proxy)==null?void 0:r.$el.parentNode}),N(u,"click",()=>{t.value=!t.value});const d=V(u);f(()=>d.value,r=>{s.trigger==="hover"&&(t.value=r)});const $=x(u),B=x(i);I(i,()=>{t.value&&!s.persistent&&(t.value=!1)});const b=M(),n=O(()=>{const{x:r,y:k,margin:p}=q(s.position,$.value,B.value);return{outer:{transform:`translateX(${r}px) translateY(${k}px)`},inner:{margin:`${p.top}px ${p.right}px ${p.bottom}px ${p.left}px`}}});return(r,k)=>(g(),T(X,{to:"body"},[Y(U,{duration:o.duration},{default:j(()=>[t.value?(g(),y("div",{key:0,class:"popover",ref_key:"contentElRef",ref:i,style:m(h(n).outer)},[A("div",{style:m(h(n).inner)},[o.raw?_(r.$slots,"default",{key:0},void 0,!0):(g(),y("div",{key:1,class:"p-1 rounded-md text-sm",style:m({backgroundColor:h(b).backgroundColorPop,color:h(b).textColorPop})},[_(r.$slots,"default",{},void 0,!0)],4))],4)],4)):F("",!0)]),_:3},8,["duration"])]))}});var W=P(K,[["__scopeId","data-v-051adf87"]]);export{W as H};
