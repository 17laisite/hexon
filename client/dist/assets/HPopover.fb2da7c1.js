import{r as f,w as p,j as v,Y as E,Z as P,$ as S,d as z,B as H,m as L,a0 as N,a1 as V,a2 as I,C as M,c as O,o as g,z as T,g as Y,h as j,b as _,f as A,k as y,i as m,O as F,a3 as U,a4 as X,_ as Z,a5 as q}from"./index.ec69b494.js";function D(l,e,t){let a=0,o=0,s={top:0,left:0,bottom:0,right:0};switch(l){case"top-left":a=e.left,o=e.top-t.height,s.bottom=4;break;case"top":a=e.left+e.width/2-t.width/2,o=e.top-t.height,s.bottom=4;break;case"top-right":a=e.left+e.width-t.width,o=e.top-t.height,s.bottom=4;break;case"right-top":a=e.left+e.width,o=e.top,s.left=4;break;case"right":a=e.left+e.width,o=e.top+e.height/2-t.height/2,s.left=4;break;case"right-bottom":a=e.left+e.width,o=e.top+e.height-t.height,s.left=4;break;case"bottom-left":a=e.left,o=e.top+e.height,s.top=4;break;case"bottom":a=e.left+e.width/2-t.width/2,o=e.top+e.height,s.top=4;break;case"bottom-right":a=e.left+e.width-t.width,o=e.top+e.height,s.top=4;break;case"left-top":a=e.left-t.width,o=e.top,s.right=4;break;case"left":a=e.left-t.width,o=e.top+e.height/2-t.height/2,s.right=4;break;case"left-bottom":a=e.left-t.width,o=e.top+e.height-t.height,s.right=4;break}return{x:a,y:o,margin:s}}function x(l){const e=f({left:0,top:0,height:0,width:0});return G(l,e),J(l,e),K(l,e),e}function G(l,e){p(()=>v(l),t=>{!t||(e.value=w(t))},{immediate:!0})}function J(l,e){E(l,()=>{!l.value||(e.value=w(l.value))})}function K(l,e){const t=new Map,a=()=>{for(const[,o]of t)o();t.clear()};p(()=>v(l.value),o=>{if(a(),!o)return;const s=new Set;let u=o;for(;u=P(u),u!==null;)s.add(u);for(const i of[...s,window]){const h=()=>{!l.value||(e.value=w(l.value))};i.addEventListener("resize",h),t.set(h,()=>{i.removeEventListener("resize",h)})}},{immediate:!0}),S(()=>{a()})}function w(l){const{left:e,top:t,height:a,width:o}=l.getBoundingClientRect();return{left:e,top:t,height:a,width:o}}const Q=z({__name:"HPopover",props:{show:{type:Boolean,default:!1},position:{default:"top"},persistent:{type:Boolean,default:!1},trigger:{default:"click"},raw:{type:Boolean,default:!1},duration:{}},emits:["update:show"],setup(l,{emit:e}){const t=l,a=e,{show:o}=H(t),s=f(!1);p(()=>o.value,r=>{s.value=r}),p(()=>s.value,r=>{a("update:show",r)});const u=q(),i=f(null),h=f(null);L(()=>{var r;i.value=(r=u==null?void 0:u.proxy)==null?void 0:r.$el.parentNode}),N(i,"click",()=>{s.value=!s.value});const $=V(i);p(()=>$.value,r=>{t.trigger==="hover"&&(s.value=r)});const B=x(i),C=x(h);I(h,()=>{s.value&&!t.persistent&&(s.value=!1)});const n=M(),b=O(()=>{const{x:r,y:k,margin:d}=D(t.position,B.value,C.value);return{outer:{transform:`translateX(${r}px) translateY(${k}px)`},inner:{margin:`${d.top}px ${d.right}px ${d.bottom}px ${d.left}px`}}});return(r,k)=>(g(),T(X,{to:"body"},[Y(U,{duration:r.duration},{default:j(()=>[s.value?(g(),_("div",{key:0,class:"popover",ref_key:"contentElRef",ref:h,style:m(b.value.outer)},[A("div",{style:m(b.value.inner)},[r.raw?y(r.$slots,"default",{key:0},void 0,!0):(g(),_("div",{key:1,class:"p-1 rounded-md text-sm",style:m({backgroundColor:v(n).backgroundColorPop,color:v(n).textColorPop})},[y(r.$slots,"default",{},void 0,!0)],4))],4)],4)):F("",!0)]),_:3},8,["duration"])]))}});var c=Z(Q,[["__scopeId","data-v-051adf87"]]);export{c as H};
