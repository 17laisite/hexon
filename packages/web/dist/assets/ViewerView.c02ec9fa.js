import{d as b,u as A,$ as T,a as g,o as s,b as o,f as e,t as h,s as _,j as y,v as n,F as $,p as B,g as k,l as S,w as f,P as j,a7 as N,a2 as E,q as O}from"./vendor.a0f19e68.js";import{u as H,H as m,d as p,n as D,g as x,e as F,o as P,p as R}from"./index.6c72b78c.js";import{D as V}from"./constants.c45fac91.js";import{H as L}from"./HToolbar.52d6cef7.js";import{E as M}from"./ErroredView.b0953e8e.js";const U=["innerHTML"],G=b({props:{content:null},setup(i){const t=i;A(d=>({"17f50b6e":e(a).mainColor,"4751f546":e(a).primary,"17724778":e(a).base3BgColor,a0ddcace:e(a).base2BgColor}));const{content:c}=T(t),l=H(),a=g(()=>({primary:l.value.colorPrimary,mainColor:l.value.textColorPrimary,base3BgColor:l.value.backgroundColorTertiary,base2BgColor:l.value.backgroundColorSecondary}));return(d,v)=>(s(),o("div",{class:"article-entry",innerHTML:e(c)||""},null,8,U))}}),I={class:"h-viewer-header text-base px-5 mx-auto",style:{"max-width":"768px"}},J={key:0,class:"text-4xl my-5"},X={key:0,class:"updated"},q={key:1,class:"date"},z={key:2,class:"categories mt-1 text-sm"},K={class:"ml-0.5"},Q={key:3,class:"tags text-sm mt-1"},W={key:0},Y={class:"ml-0.5"},Z={key:4,class:"rest text-xs"},ee=b({props:{article:null},setup(i){const t=i,c=H(),l=g(()=>t.article.date?t.article.date.format(V):""),a=g(()=>t.article.updated?t.article.updated.format(V):""),d=g(()=>{const v=t.article.fm;return JSON.stringify(v)===JSON.stringify({})?"":Object.entries(v).map(([C,r])=>`${C}: ${r}`).join(`
`)});return(v,C)=>(s(),o("div",I,[i.article.title?(s(),o("h1",J,h(i.article.title),1)):_("",!0),y("div",{style:S({color:e(c).textColorSecondary})},[e(a)?(s(),o("div",X,[n(e(p),{class:"mr-1",style:{transform:"translateX(-1px)"},name:e(m).DevUpdate},null,8,["name"]),y("span",null,h(e(a)),1)])):_("",!0),e(l)?(s(),o("div",q,[n(e(p),{class:"mr-1",style:{transform:"translateX(-1px)"},name:e(m).Globe},null,8,["name"]),y("span",null,h(e(l)),1)])):_("",!0),i.article.categories.length?(s(),o("div",z,[n(e(p),{class:"mr-1",name:e(m).Folder},null,8,["name"]),(s(!0),o($,null,B(i.article.categories,(r,u)=>(s(),o($,{key:u},[u?(s(),k(e(p),{key:0,class:"ml-0.5",name:e(m).ChevronRight},null,8,["name"])):_("",!0),y("span",K,h(r),1)],64))),128))])):_("",!0),i.article.tags.length?(s(),o("div",Q,[n(e(p),{class:"mr-1",name:e(m).Tag},null,8,["name"]),(s(!0),o($,null,B(i.article.tags,(r,u)=>(s(),o($,{key:u},[u?(s(),o("span",W,",")):_("",!0),y("span",Y,h(r),1)],64))),128))])):_("",!0),e(d)?(s(),o("pre",Z,h(e(d)),1)):_("",!0)],4)]))}}),te=y("div",{class:"flex-1"},null,-1),ae=b({emits:["on-action"],setup(i,{emit:t}){const c=D();return(l,a)=>(s(),k(L,null,{default:f(()=>[te,n(e(x),{class:"mr-2",type:"primary",round:"",inverted:"",onClick:a[0]||(a[0]=d=>t("on-action",{type:"edit"}))},{default:f(()=>[n(e(p),{name:e(m).Edit},null,8,["name"])]),_:1}),n(e(x),{class:"mr-2",type:"error",round:"",inverted:"",onClick:a[1]||(a[1]=d=>t("on-action",{type:"delete"}))},{default:f(()=>[n(e(p),{name:e(m).Delete},null,8,["name"])]),_:1}),e(c).isDraft?(s(),k(e(x),{key:0,class:"mr-2",type:"success",round:"",inverted:"",onClick:a[2]||(a[2]=d=>t("on-action",{type:"publish"}))},{default:f(()=>[n(e(p),{name:e(m).Upload},null,8,["name"])]),_:1})):_("",!0),n(e(x),{class:"mr-2",type:"common",round:"",inverted:"",onClick:a[3]||(a[3]=d=>t("on-action",{type:"code"}))},{default:f(()=>[n(e(p),{name:e(m).Code},null,8,["name"])]),_:1}),n(e(x),{class:"mr-2",type:"common",round:"",inverted:""},{default:f(()=>[n(e(p),{name:e(m).GlobalNavButton},null,8,["name"])]),_:1})]),_:1}))}}),se=O("\u91CD\u8BD5"),ne={key:1,class:"w-full h-full flex flex-col"},re={class:"overflow-auto flex-1"},de=b({setup(i){const t=E(),c=F(),l=D();function a(){const r=t.params.type,u=t.params.source;r==="post"||r==="page"?c.getArticle({type:r,source:u}):c.goHome()}j(()=>t.fullPath,()=>{t.name==="view"&&a()},{immediate:!0}),N(()=>{c.clearArticle()});const d=g(()=>{var r;return((r=l.article)==null?void 0:r.content)||""}),v=g(()=>R(l.article)),C=r=>{const u=t.params.type,w=t.params.source;switch(r.type){case"code":break;case"edit":c.editArticle({type:u,source:w});break;case"delete":c.deleteArticle({type:u,source:w});break;case"publish":c.publishArticle(w);break}};return(r,u)=>(s(),k(e(P),{loading:e(l).loading},{default:f(()=>[e(l).error?(s(),k(M,{key:0},{default:f(()=>[n(e(x),{onClick:a},{default:f(()=>[se]),_:1})]),_:1})):(s(),o("div",ne,[n(ae,{onOnAction:C}),y("div",re,[n(ee,{article:e(v)},null,8,["article"]),n(G,{content:e(d)},null,8,["content"])])]))]),_:1},8,["loading"]))}});export{de as default};
