var xe=Object.defineProperty,he=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var de=(o,s,l)=>s in o?xe(o,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[s]=l,pe=(o,s)=>{for(var l in s||(s={}))ke.call(s,l)&&de(o,l,s[l]);if(ie)for(var l of ie(s))we.call(s,l)&&de(o,l,s[l]);return o},ve=(o,s)=>he(o,Ce(s));import{w as fe,d as L,t as A,v as R,x as $e,c as p,a as v,b as C,y as b,z as K,n as S,f as t,i as N,A as M,B as F,u as X,F as J,C as q,e as g,D as T,E as se,G as ge,H as Q,I as Se,k as Be,J as He,K as Le,L as Fe,M as Ve,N as Ie,R as Ee}from"./vendor.58209086.js";import{H as le}from"./HToolbar.c5ba8004.js";import{_ as O,H as Y,a as B,b as De}from"./HButton.057a631e.js";import{a as Ae,l as Z,o as G}from"./index.94cd432f.js";import{H as Ne}from"./HInput.c08e76e5.js";const Me=(o,s)=>{fe(l=>{const e=new ResizeObserver(n=>{for(let a of n)s(a)});o.value&&e.observe(o.value),l(()=>{e.disconnect()})})},Te=(o,s,l)=>{fe(e=>{o.addEventListener(s,l),e(()=>{o.removeEventListener(s,l)})})};const Re=L({props:{sep1:null,sep2:null,sep1at:null,sep2at:null,sepHalfWidth:{default:5}},emits:["update:sep1at","update:sep2at"],setup(o,{emit:s}){const l=o,e=x=>`${x}px`,n=x=>Math.max(x,0),a=x=>{const w=R("");return{setCursor:()=>{w.value=document.body.style.cursor,document.body.style.cursor=x},resetCursor:()=>{document.body.style.cursor=w.value}}},_=x=>{s("update:sep1at",x)},i=x=>{s("update:sep2at",x)},{sep1:r,sep2:u,sep1at:f,sep2at:y,sepHalfWidth:h}=A(l),k=R(),H=R(0),d=$e({x:0,y:0}),c=R(""),{setCursor:D,resetCursor:j}=a("col-resize"),U=()=>{c.value="1",window.addEventListener("mousemove",P),D()},ee=()=>{c.value="2",window.addEventListener("mousemove",P),D()},te=()=>{c.value="",window.removeEventListener("mousemove",P),j()},P=x=>{if(c.value==="1"){const w=x.clientX-d.x;w<=r.value.min?_(r.value.min):w>=r.value.max?_(r.value.max):_(w)}else if(c.value==="2"){const w=x.clientX-d.x-V.value;w<=u.value.min?i(u.value.min):w>=u.value.max?i(u.value.max):i(w)}};Te(window,"mouseup",te),Me(k,x=>{var w,z,W,ae,ce,ue;H.value=(z=(w=k.value)==null?void 0:w.clientWidth)!=null?z:0,d.x=(ae=(W=k.value)==null?void 0:W.offsetLeft)!=null?ae:0,d.y=(ue=(ce=k.value)==null?void 0:ce.offsetTop)!=null?ue:0});const V=p(()=>f.value),oe=p(()=>({left:0,width:e(V.value)})),m=p(()=>y.value),$=p(()=>({left:e(V.value),width:e(m.value)})),E=p(()=>n(H.value-V.value-m.value)),me=p(()=>({left:e(V.value+m.value),width:e(E.value)})),ye=p(()=>({left:e(V.value-h.value),width:e(h.value*2)})),be=p(()=>({left:e(V.value+m.value-h.value),width:e(h.value*2)}));return(x,w)=>(v(),C("div",{ref:(z,W)=>{W.container=z,k.value=z},class:"split-view-container"},[b("div",{class:"split-view-view",style:S(t(oe))},[K(x.$slots,"first")],4),b("div",{class:"split-view-view",style:S(t($))},[K(x.$slots,"second")],4),b("div",{class:"split-view-view",style:S(t(me))},[K(x.$slots,"third")],4),b("div",{class:"split-view-view split-view-seprator",style:S(t(ye)),onMousedown:U},null,36),b("div",{class:"split-view-view split-view-seprator",style:S(t(be)),onMousedown:ee},null,36)],512))}}),je=L({setup(o){const s=N();return(l,e)=>(v(),M(le,null,{default:F(()=>[b("span",{class:"text-xl pl-8",style:S({color:t(s).color.foreground.main})}," Hexon ",4)]),_:1}))}});const Pe={class:"h-nav-title text-sm select-none font-bold leading-11 px-4"},ze=L({setup(o){X(e=>({"2ae016ff":t(l)}));const s=N(),l=p(()=>s.value.color.foreground.main);return(e,n)=>(v(),C("div",Pe,[K(e.$slots,"default",{},void 0,!0)]))}});var ne=O(ze,[["__scopeId","data-v-28517d65"]]);const Ke={class:"h-nav-item px-4 py-0.5 mx-0 my-0.5 h-7 rounded-md select-none cursor-pointer flex items-center"},Ue={class:"w-4 inline-block"},We={class:"text text-sm"},Oe={key:0,class:"sub text-xs ml-2"},Ge=L({props:{icon:null,text:null,indent:{default:0},selected:{default:!1},color:null,sub:{default:""}},setup(o){const s=o;X(f=>({"48a19b62":t(u).color,"61d97e5d":t(u).bgColor,"5345eeb8":t(u).subColor,"484a3063":t(u).hoverBgColor,bdf14d92:t(u).activeBgColor}));const{icon:l,text:e,indent:n,selected:a,color:_}=A(s),i=p(()=>n.value===0?[]:new Array(n.value).fill(0).map((f,y)=>y)),r=N(),u=p(()=>{const f=r.value.color.foreground.main,y=a.value?r.value.color.background.selected:r.value.color.background.transparent,h=r.value.color.foreground.sub,k=r.value.color.background.hover,H=r.value.color.background.active;return{color:f,bgColor:y,subColor:h,hoverBgColor:k,activeBgColor:H}});return(f,y)=>{var h;return v(),C("div",Ke,[(v(!0),C(J,null,q(t(i),k=>(v(),C("span",Ue))),256)),g(Y,{class:"mr-3 text-lg",style:S({color:t(_)}),name:t(l)},null,8,["style","name"]),b("span",We,T(t(e)),1),((h=o.sub)==null?void 0:h.toString())?(v(),C("span",Oe,T(o.sub),1)):se("",!0)])}}});var I=O(Ge,[["__scopeId","data-v-35a75612"]]);const _e=ge("article-list",{state:()=>({filter:{type:"all"}}),actions:{setFilter(o){this.filter=o}},getters:{articleFilter(o){const s=o.filter;return l=>{switch(s.type){case"all":return l;case"page":return l.filter(e=>e.__page);case"post":return l.filter(e=>e.__post);case"draft":return l.filter(e=>e.__post&&!e.published);case"category":return l.filter(e=>e.__post).filter(e=>{var n;return(n=e.categories)==null?void 0:n.includes(s.slug)});case"tag":return l.filter(e=>e.__post).filter(e=>{var n;return(n=e.tags)==null?void 0:n.includes(s.slug)});default:return[]}}}}}),Xe={class:"py-0 pl-4 pr-2"},Je=Q("\u64CD\u4F5C"),qe=Q("\u7B5B\u9009"),Qe=Q("\u5206\u7C7B"),Ye=L({props:{categories:null,post:null,page:null,draft:null},emits:["on-action","on-click"],setup(o,{emit:s}){const l=o,e=N(),{categories:n,post:a,page:_,draft:i}=A(l),r=p(()=>a.value+_.value+i.value),u=p(()=>{const H=[];function d(c,D=0){var j;H.push({text:c.name,icon:B.Folder,color:e==null?void 0:e.value.color.folder,indent:D,sub:c.posts.length,key:c.slug,slug:c.slug}),(j=c.children)==null||j.forEach(U=>d(U,D+1))}return n.value.forEach(c=>d(c)),H}),f=p(()=>({deploy:e==null?void 0:e.value.color.primary.n,generate:e==null?void 0:e.value.color.primary.n,clean:e==null?void 0:e.value.color.error.n,gitsave:e==null?void 0:e.value.color.primary.n,gitsync:e==null?void 0:e.value.color.error.n,all:e==null?void 0:e.value.color.all,post:e==null?void 0:e.value.color.post,page:e==null?void 0:e.value.color.page,draft:e==null?void 0:e.value.color.draft})),y=H=>{s("on-action",H)},h=_e(),k=p(()=>h.filter.type);return(H,d)=>(v(),C("div",Xe,[g(ne,null,{default:F(()=>[Je]),_:1}),g(I,{text:"\u90E8\u7F72",icon:t(B).Airplane,color:t(f).deploy,onClick:d[0]||(d[0]=c=>y({type:"deploy"}))},null,8,["icon","color"]),g(I,{text:"\u751F\u6210",icon:t(B).Library,color:t(f).generate,onClick:d[1]||(d[1]=c=>y({type:"generate"}))},null,8,["icon","color"]),g(I,{text:"\u6E05\u7406",icon:t(B).EraseTool,color:t(f).clean,onClick:d[2]||(d[2]=c=>y({type:"clean"}))},null,8,["icon","color"]),g(I,{text:"\u540C\u6B65\u5230 Git",icon:t(B).Upload,color:t(f).gitsave,onClick:d[3]||(d[3]=c=>y({type:"gitsave"}))},null,8,["icon","color"]),g(I,{text:"\u4ECE Git \u540C\u6B65",icon:t(B).Download,color:t(f).gitsync,onClick:d[4]||(d[4]=c=>y({type:"gitsync"}))},null,8,["icon","color"]),g(ne,null,{default:F(()=>[qe]),_:1}),g(I,{text:"\u5168\u90E8",icon:t(B).Home,sub:t(r),color:t(f).all,selected:t(k)==="all",onClick:d[5]||(d[5]=c=>y({type:"all"}))},null,8,["icon","sub","color","selected"]),g(I,{text:"\u6587\u7AE0",icon:t(B).Edit,sub:t(a),color:t(f).post,onClick:d[6]||(d[6]=c=>y({type:"post"})),selected:t(k)==="post"},null,8,["icon","sub","color","selected"]),g(I,{text:"\u9875\u9762",icon:t(B).Page,sub:t(_),color:t(f).page,onClick:d[7]||(d[7]=c=>y({type:"page"})),selected:t(k)==="page"},null,8,["icon","sub","color","selected"]),g(I,{text:"\u8349\u7A3F",icon:t(B).Read,sub:t(i),color:t(f).draft,onClick:d[8]||(d[8]=c=>y({type:"draft"})),selected:t(k)==="draft"},null,8,["icon","sub","color","selected"]),g(ne,null,{default:F(()=>[Qe]),_:1}),(v(!0),C(J,null,q(t(u),c=>(v(),M(I,{text:c.text,icon:c.icon,indent:c.indent,color:c.color,sub:c.sub,onClick:D=>y({type:"category",slug:c.slug})},null,8,["text","icon","indent","color","sub","onClick"]))),256))]))}});function Ze(o,s,l){const{idKey:e,parentKey:n,childrenKey:a}=l,_=et(o,n);function i(u){const f=(_[u[e]]||[]).map(i);return f.length?ve(pe({},u),{[a]:f}):u}return o.filter(s).map(i)}function et(o,s){const l={};return o.map(e=>{const n=e[s];l[n]?l[n].push(e):l[n]=[e]}),l}const tt=ge("main",{state:()=>({posts:{},pages:{},categories:{},tags:{}}),actions:{async getBlogData(){const o=Ae.access;try{const[s,l,e,n]=(await Promise.all([o.get("/posts"),o.get("/pages"),o.get("/tags"),o.get("/categories")])).map(a=>a.data);this.posts=Z(s,"source"),this.pages=Z(l,"source"),this.tags=Z(e,"slug"),this.categories=Z(n,"slug")}catch(s){return s}}},getters:{articles(o){return G(o.pages).concat(G(o.posts))},allPostsList(o){return G(o.posts)},publishedPostsList(o){return this.allPostsList.filter(s=>s.published)},draftsList(o){return this.allPostsList.filter(s=>!s.published)},pagesList(o){return G(o.pages)},categoriesTree(){return Ze(this.categoriesList,o=>!o.parent,{idKey:"_id",parentKey:"parent",childrenKey:"children"})},categoriesList(){return G(this.categories)}}}),ot=b("div",{class:"flex-1"},null,-1),st=L({props:{modelValue:null},emits:["update:modelValue","on-add"],setup(o,{emit:s}){const l=o,{modelValue:e}=A(l),n=a=>s("update:modelValue",a);return(a,_)=>(v(),M(le,{class:"px-6"},{default:F(()=>[ot,g(Ne,{modelValue:t(e),"onUpdate:modelValue":n,type:"secondary",placeholder:"\u641C\u7D22",clearable:""},null,8,["modelValue"]),g(De,{class:"ml-2",round:"",onClick:_[0]||(_[0]=i=>s("on-add"))},{default:F(()=>[g(Y,{name:t(B).Add},null,8,["name"])]),_:1})]),_:1}))}});const lt=L({props:{color:null,bgColor:null,clickable:{default:!1}},setup(o){const s=o,{color:l,bgColor:e,clickable:n}=A(s),a=N(),_=p(()=>({clickable:n.value})),i=p(()=>{var r,u;return{color:(r=l==null?void 0:l.value)!=null?r:a.value.color.foreground.min,backgroundColor:(u=e==null?void 0:e.value)!=null?u:a.value.color.primary.n}});return(r,u)=>(v(),C("span",{class:Se(["h-badge px-1.5 py-0.5 rounded text-xs select-none mr-1 mb-0.5 inline-block",t(_)]),style:S(t(i))},[K(r.$slots,"default",{},void 0,!0)],6))}});var nt=O(lt,[["__scopeId","data-v-c4e4feaa"]]);const rt={class:"h-article-item px-4 py-2 select-none text-sm rounded-md mb-1"},at={class:"title font-bold"},ct={key:0,class:"brief text-xs mt-1"},ut={key:1,class:"mt-0.5"},it=L({props:{title:null,brief:null,tags:null,date:null,selected:{default:!1}},setup(o){const s=o;X(f=>({"2596f05c":t(u).bgColor,"4d21b478":t(u).hoverBgColor,"34810ff6":t(u).activeBgColor,"3aae2e26":t(u).titleColor,"04a3280b":t(u).briefColor}));const{title:l,brief:e,tags:n,date:a,selected:_}=A(s),i=p(()=>Be(a.value).fromNow()),r=N(),u=p(()=>({bgColor:_.value?r.value.color.background.selected:r.value.color.background.transparent,hoverBgColor:r.value.color.background.hover,activeBgColor:r.value.color.background.active,titleColor:r.value.color.foreground.main,briefColor:r.value.color.foreground.sub}));return(f,y)=>(v(),C("div",rt,[b("div",at,T(t(l)),1),t(e)?(v(),C("div",ct,T(t(e)),1)):se("",!0),t(n)&&t(n).length?(v(),C("div",ut,[(v(!0),C(J,null,q(t(n),h=>(v(),M(nt,{color:t(r).color.foreground.main,"bg-color":t(r).color.background.badge,key:h},{default:F(()=>[Q(T(h),1)]),_:2},1032,["color","bg-color"]))),128))])):se("",!0),b("div",{class:"date mt-1 text-xs",style:S({color:t(r).color.primary.n})},T(t(i)),5)]))}});var dt=O(it,[["__scopeId","data-v-3686081c"]]);const pt={class:"h-article-list px-3 py-2"},vt=L({props:{articles:null,selected:null},emits:["on-click"],setup(o,{emit:s}){const l=o,{articles:e,selected:n}=A(l);return(a,_)=>(v(),C("div",pt,[(v(!0),C(J,null,q(t(e),i=>(v(),M(dt,{title:i.title,brief:i.brief,tags:i.tags,date:i.date,key:i.source,selected:t(n)===i.source,onClick:r=>s("on-click",{source:i.source,type:i.type})},null,8,["title","brief","tags","date","selected","onClick"]))),128))]))}});const ft=o=>(He("data-v-66e72356"),o=o(),Le(),o),gt={key:0},_t={class:"flex-1 flex flex-col ml-2"},mt={class:"text-sm font-bold"},yt=ft(()=>b("div",{class:"text-xs text-sub"},"\u5DF2\u767B\u5F55",-1)),bt=L({props:{name:{default:""},icon:{default:!1}},setup(o){const s=o;X(a=>({"1b511736":t(n).color.background.hover,"4235f04c":t(n).color.background.active}));const{name:l}=A(s),e=p(()=>{var a;return(a=l.value)==null?void 0:a[0]}),n=N();return(a,_)=>(v(),M(le,{class:"h-nav-setting text-main px-4 cursor-pointer"},{default:F(()=>[b("div",{class:"avatar w-8 h-8 rounded-full text-xl flex items-center justify-center",style:S({background:t(n).color.primary.n,color:t(n).color.foreground.min})},[!o.icon&&t(e)?(v(),C("span",gt,T(t(e)),1)):(v(),M(Y,{key:1,name:t(B).Contact},null,8,["name"]))],4),b("div",_t,[b("div",mt,T(t(l)||"\u672A\u547D\u540D\u7528\u6237"),1),yt]),g(Y,{name:t(B).Settings},null,8,["name"]),K(a.$slots,"default",{},void 0,!0)]),_:3}))}});var xt=O(bt,[["__scopeId","data-v-66e72356"]]);const ht={style:{flex:"1 0 0","overflow-y":"auto"}},Ct={class:"overflow-auto flex-1"},Lt=L({setup(o){const s=tt(),l=Fe(),e=Ve(),n=_e(),a=N(),_=async()=>{s.getBlogData()};Ie(()=>_());const i=R(200),r=R(320),u={sep1:{min:150,max:300},sep2:{min:200,max:500}},f=p(()=>s.categoriesTree),y=p(()=>n.articleFilter),h=p(()=>y.value(s.articles)),k=()=>n.setFilter({type:"all"}),H=()=>n.setFilter({type:"post"}),d=()=>n.setFilter({type:"page"}),c=()=>n.setFilter({type:"draft"}),D=m=>n.setFilter({type:"category",slug:m}),j=m=>{switch(m.type){case"all":k();break;case"post":H();break;case"page":d();break;case"draft":c();break;case"category":D(m.slug);break}},U=p(()=>s.draftsList.length),ee=p(()=>s.publishedPostsList.length),te=p(()=>s.pagesList.length),P=R(""),re=p(()=>h.value.map(m=>{const $={title:m.title,brief:m.brief,date:m.date,source:m.source,type:m.__post?"post":"page"};return m.__post&&($.tags=m.tags.map(E=>s.tags[E].name)),$})),V=p(()=>decodeURIComponent(e.params.source)),oe=({source:m,type:$})=>{m===V.value?l.push("/"):l.push({name:"view",params:{source:encodeURIComponent(m),type:$}})};return(m,$)=>(v(),M(t(Re),{sep1at:i.value,"onUpdate:sep1at":$[1]||($[1]=E=>i.value=E),sep2at:r.value,"onUpdate:sep2at":$[2]||($[2]=E=>r.value=E),sep1:u.sep1,sep2:u.sep2,class:"h-full w-full"},{first:F(()=>[b("div",{class:"w-full h-full flex flex-col",style:S({backgroundColor:t(a).color.background.base3})},[g(je),b("div",ht,[g(Ye,{categories:t(f),page:t(te),post:t(ee),draft:t(U),onOnAction:j},null,8,["categories","page","post","draft"])]),g(xt)],4)]),second:F(()=>[b("div",{class:"flex flex-col w-full h-full",style:S({backgroundColor:t(a).color.background.base2})},[g(st,{modelValue:P.value,"onUpdate:modelValue":$[0]||($[0]=E=>P.value=E),class:"flex-shrink-0"},null,8,["modelValue"]),b("div",Ct,[g(vt,{articles:t(re),selected:t(V),onOnClick:oe},null,8,["articles","selected"])])],4)]),third:F(()=>[b("div",{class:"w-full h-full",style:S({backgroundColor:t(a).color.background.base1})},[g(t(Ee))],4)]),_:1},8,["sep1at","sep2at","sep1","sep2"]))}});export{Lt as default};
