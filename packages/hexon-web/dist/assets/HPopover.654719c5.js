import{g as v,Q as f,e as d,aa as S,d as z,a1 as H,R as L,ad as N,an as P,a5 as j,c as I,f as M,o as m,k as V,v as _,w as y,b as x,h as O,r as $,C as g,s as A,z as D,B as F}from"./vendor.325b0c67.js";import{u as Q,g as T}from"./HDivider.2d903c26.js";import{_ as U,j as X,w as Y}from"./index.d2454fd2.js";function B(o){const e=v({left:0,top:0,height:0,width:0});return q(o,e),G(o,e),J(o,e),e}function q(o,e){f(()=>d(o),s=>{!s||(e.value=w(s))},{immediate:!0})}function G(o,e){Q(o,()=>{!o.value||(e.value=w(o.value))})}function J(o,e){const s=new Map,a=()=>{for(const[,t]of s)t();s.clear()};f(()=>d(o.value),t=>{if(a(),!t)return;const l=new Set;let u=t;for(;u=T(u),u!==null;)l.add(u);for(const i of[...l,window]){const h=()=>{!o.value||(e.value=w(o.value))};i.addEventListener("resize",h),s.set(h,()=>{i.removeEventListener("resize",h)})}},{immediate:!0}),S(()=>{a()})}function w(o){const{left:e,top:s,height:a,width:t}=o.getBoundingClientRect();return{left:e,top:s,height:a,width:t}}function K(o,e,s){let a=0,t=0,l={top:0,left:0,bottom:0,right:0};switch(o){case"top-left":a=e.left,t=e.top-s.height,l.bottom=4;break;case"top":a=e.left+e.width/2-s.width/2,t=e.top-s.height,l.bottom=4;break;case"top-right":a=e.left+e.width-s.width,t=e.top-s.height,l.bottom=4;break;case"right-top":a=e.left+e.width,t=e.top,l.left=4;break;case"right":a=e.left+e.width,t=e.top+e.height/2-s.height/2,l.left=4;break;case"right-bottom":a=e.left+e.width,t=e.top+e.height-s.height,l.left=4;break;case"bottom-left":a=e.left,t=e.top+e.height,l.top=4;break;case"bottom":a=e.left+e.width/2-s.width/2,t=e.top+e.height,l.top=4;break;case"bottom-right":a=e.left+e.width-s.width,t=e.top+e.height,l.top=4;break;case"left-top":a=e.left-s.width,t=e.top,l.right=4;break;case"left":a=e.left-s.width,t=e.top+e.height/2-s.height/2,l.right=4;break;case"left-bottom":a=e.left-s.width,t=e.top+e.height-s.height,l.right=4;break}return{x:a,y:t,margin:l}}const W=z({props:{show:{type:Boolean,default:!1},position:{default:"top"},persistent:{type:Boolean,default:!1},trigger:{default:"click"},raw:{type:Boolean,default:!1},duration:null},emits:["update:show"],setup(o,{emit:e}){const s=o,{show:a}=H(s),t=v(!1);f(()=>a.value,r=>{t.value=r}),f(()=>t.value,r=>{e("update:show",r)});const l=F(),u=v(null),i=v(null);L(()=>{var r;u.value=(r=l==null?void 0:l.proxy)==null?void 0:r.$el.parentNode}),N(u,"click",()=>{t.value=!t.value});const h=P(u);f(()=>h.value,r=>{s.trigger==="hover"&&(t.value=r)});const E=B(u),C=B(i);j(i,()=>{t.value&&!s.persistent&&(t.value=!1)});const n=I(()=>{const{x:r,y:k,margin:p}=K(s.position,E.value,C.value);return{outer:{transform:`translateX(${r}px) translateY(${k}px)`},inner:{margin:`${p.top}px ${p.right}px ${p.bottom}px ${p.left}px`}}}),b=M();return(r,k)=>(m(),V(D,{to:"body"},[_(Y,null,{default:y(()=>[_(X,{duration:o.duration},{default:y(()=>[t.value?(m(),x("div",{key:0,class:"popover",ref_key:"contentElRef",ref:i,style:g(d(n).outer)},[O("div",{style:g(d(n).inner)},[o.raw?$(r.$slots,"default",{key:0},void 0,!0):(m(),x("div",{key:1,class:"p-1 rounded-md",style:g({backgroundColor:d(b).color.common.d5,color:d(b).color.white})},[$(r.$slots,"default",{},void 0,!0)],4))],4)],4)):A("",!0)]),_:3},8,["duration"])]),_:3})]))}});var ee=U(W,[["__scopeId","data-v-0a79608d"]]);export{ee as H};
