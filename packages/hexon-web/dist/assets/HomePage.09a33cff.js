import{_ as ie,d as V,$ as N,g as D,a0 as Se,c as p,o as i,e as b,h as d,r as G,C,b as e,a1 as ce,u as ue,f as q,l as w,p as S,t as B,v as f,a2 as ke,a3 as $e,P as ee,s as H,F as I,j as Y,q as te,w as de,a4 as De,n as Ee,z as Fe,a5 as Be,a6 as He,a7 as Ve}from"./vendor.78c021b8.js";import{H as se,u as T,a as pe}from"./HToolbar.5dd88369.js";import{i as z,a as ve,b as Ae,_ as me,H as E,c as g,d as O,e as J,u as fe,f as Le,g as Me,h as ye}from"./index.6183247d.js";import"./HNavTitle.11ce491c.js";import{_ as Ie}from"./HNavList.ac2e7e96.js";import{H as Re}from"./HInput.6a893b37.js";import{H as oe,u as Pe,_ as ae}from"./HDivider.a5faf9dd.js";import{D as Te}from"./constants.c45fac91.js";const je=(t,a)=>{ie(s=>{const o=new ResizeObserver(r=>{for(let n of r)a(n)});t.value&&o.observe(t.value),s(()=>{o.disconnect()})})},Ne=(t,a,s)=>{ie(o=>{t.addEventListener(a,s),o(()=>{t.removeEventListener(a,s)})})};const ze=V({props:{sep1:null,sep2:null,sep1at:null,sep2at:null,sepHalfWidth:{default:5}},emits:["update:sep1at","update:sep2at"],setup(t,{emit:a}){const s=t,o=x=>`${x}px`,r=x=>Math.max(x,0),n=x=>{const k=D("");return{setCursor:()=>{k.value=document.body.style.cursor,document.body.style.cursor=x},resetCursor:()=>{document.body.style.cursor=k.value}}},l=x=>{a("update:sep1at",x)},h=x=>{a("update:sep2at",x)},{sep1:y,sep2:v,sep1at:c,sep2at:m,sepHalfWidth:u}=N(s),F=D(),R=D(0),$=Se({x:0,y:0}),A=D(""),{setCursor:U,resetCursor:_}=n("col-resize"),j=()=>{A.value="1",window.addEventListener("mousemove",P),U()},L=()=>{A.value="2",window.addEventListener("mousemove",P),U()},W=()=>{A.value="",window.removeEventListener("mousemove",P),_()},P=x=>{if(A.value==="1"){const k=x.clientX-$.x;k<=y.value.min?l(y.value.min):k>=y.value.max?l(y.value.max):l(k)}else if(A.value==="2"){const k=x.clientX-$.x-M.value;k<=v.value.min?h(v.value.min):k>=v.value.max?h(v.value.max):h(k)}};Ne(window,"mouseup",W),je(F,x=>{var k,Q,Z,le,ne,re;R.value=(Q=(k=F.value)==null?void 0:k.clientWidth)!=null?Q:0,$.x=(le=(Z=F.value)==null?void 0:Z.offsetLeft)!=null?le:0,$.y=(re=(ne=F.value)==null?void 0:ne.offsetTop)!=null?re:0});const M=p(()=>c.value),he=p(()=>({left:0,width:o(M.value)})),X=p(()=>m.value),_e=p(()=>({left:o(M.value),width:o(X.value)})),xe=p(()=>r(R.value-M.value-X.value)),be=p(()=>({left:o(M.value+X.value),width:o(xe.value)})),we=p(()=>({left:o(M.value-u.value),width:o(u.value*2)})),Ce=p(()=>({left:o(M.value+X.value-u.value),width:o(u.value*2)}));return(x,k)=>(i(),b("div",{ref_key:"container",ref:F,class:"split-view-container"},[d("div",{class:"split-view-view",style:C(e(he))},[G(x.$slots,"first")],4),d("div",{class:"split-view-view",style:C(e(_e))},[G(x.$slots,"second")],4),d("div",{class:"split-view-view",style:C(e(be))},[G(x.$slots,"third")],4),d("div",{class:"split-view-view split-view-seprator",style:C(e(we)),onMousedown:j},null,36),d("div",{class:"split-view-view split-view-seprator",style:C(e(Ce)),onMousedown:L},null,36)],512))}}),ge=ce("article-list",{state:()=>({filter:{type:"all"}}),actions:{setFilter(t){this.filter=t}},getters:{articleFilter(t){const a=t.filter;return s=>{switch(a.type){case"all":return s;case"page":return s.filter(Ae);case"post":return s.filter(z);case"draft":return s.filter(ve);case"category":return s.filter(z).filter(o=>{var r;return(r=o.categories)==null?void 0:r.includes(a.slug)});case"tag":return s.filter(z).filter(o=>{var r;return(r=o.tags)==null?void 0:r.includes(a.slug)});default:return[]}}}}});const Oe=t=>(ke("data-v-53c48118"),t=t(),$e(),t),Ue={key:0},We={class:"flex-1 flex flex-col ml-2"},Xe={class:"name text-sm font-bold"},Ge=Oe(()=>d("div",{class:"text-xs text-sub"},"\u5DF2\u767B\u5F55",-1)),qe=V({props:{name:{default:""},icon:{type:Boolean,default:!1}},setup(t){const a=t;ue(n=>({"540426de":e(r).color.background.hover,"45b8735e":e(r).color.background.active}));const{name:s}=N(a),o=p(()=>{var n;return(n=s.value)==null?void 0:n[0]}),r=q();return(n,l)=>(i(),w(se,{class:"h-nav-setting text-main px-4 cursor-pointer"},{default:S(()=>[d("div",{class:"avatar w-8 h-8 rounded-full text-xl flex items-center justify-center",style:C({background:e(r).color.primary.n,color:e(r).color.foreground.min})},[!t.icon&&e(o)?(i(),b("span",Ue,B(e(o)),1)):(i(),w(e(E),{key:1,name:e(g).Contact},null,8,["name"]))],4),d("div",We,[d("div",Xe,B(e(s)||"\u672A\u547D\u540D\u7528\u6237"),1),Ge]),f(e(E),{name:e(g).Settings},null,8,["name"]),G(n.$slots,"default",{},void 0,!0)]),_:3}))}});var Ye=me(qe,[["__scopeId","data-v-53c48118"]]);const Je=V({setup(t){const a=q();return(s,o)=>(i(),w(se,null,{default:S(()=>[d("span",{class:"text-xl pl-8",style:C({color:e(a).color.foreground.main,fontWeight:600,letterSpacing:"0.05rem"})}," Hexon ",4)]),_:1}))}}),Ke=ce("actions",{actions:{async deploy(){this.loading.start(),await O.deploy().then(()=>{this.notification.notify({type:"success",title:"\u6210\u529F"})},t=>{throw this.notification.notify({title:"\u5931\u8D25",desc:t.message,type:"error",duration:5e3}),t}),this.loading.stop()},async generate(){this.loading.start(),await O.generate().then(()=>{this.notification.notify({type:"success",title:"\u6210\u529F"})},t=>{console.error(t),this.notification.notify({title:"\u5931\u8D25",desc:t.message,type:"error",duration:5e3})}),this.loading.stop()},async clean(){this.loading.start(),await O.clean().then(()=>{this.notification.notify({type:"success",title:"\u6210\u529F"})},t=>{console.error(t),this.notification.notify({title:"\u5931\u8D25",desc:t.message,type:"error",duration:5e3})}),this.loading.stop()},async gitSync(){this.loading.start(),await O.gitSync().then(()=>{this.notification.notify({type:"success",title:"\u6210\u529F"}),T().loadBlogData()},t=>{this.notification.notify({title:"\u5931\u8D25",desc:t.message,type:"error",duration:5e3})}),this.loading.stop()},async gitSave(){this.loading.start(),await O.gitSave().then(()=>{this.notification.notify({type:"success",title:"\u6210\u529F"}),T().loadBlogData()},t=>{this.notification.notify({title:"\u5931\u8D25",desc:t.message,type:"error",duration:5e3})}),this.loading.stop()}}}),Qe={class:"bg-base-3 w-full h-full flex flex-col"},Ze={style:{flex:"1 0 0","overflow-y":"auto"}},et={class:"pb-2 pl-4 pr-2"},tt=V({setup(t){const a=pe(),s=ge(),o=Ke(),r=T(),n=q(),l=p(()=>({deploy:n.value.color.primary.n,generate:n.value.color.primary.n,clean:n.value.color.error.n,gitsave:n.value.color.primary.n,gitsync:n.value.color.error.n,all:n.value.color.all,post:n.value.color.post,page:n.value.color.page,draft:n.value.color.draft})),h=[{type:"title",label:"\u64CD\u4F5C"},{type:"item",text:"\u90E8\u7F72",icon:g.Airplane,color:l.value.deploy,key:"deploy"},{type:"item",text:"\u751F\u6210",icon:g.Library,color:l.value.generate,key:"generate"},{type:"item",text:"\u6E05\u7406",icon:g.EraseTool,color:l.value.clean,key:"clean"},{type:"item",text:"\u540C\u6B65\u5230 Git",icon:g.Upload,color:l.value.gitsave,key:"gitsave"},{type:"item",text:"\u4ECE Git \u540C\u6B65",icon:g.Download,color:l.value.gitsync,key:"gitsync"}],y=p(()=>m.value+v.value+c.value),v=p(()=>a.publishedPostsList.length),c=p(()=>a.pagesList.length),m=p(()=>a.draftsList.length),u=p(()=>s.filter.type),F=p(()=>[{type:"title",label:"\u7B5B\u9009"},{type:"item",text:"\u5168\u90E8",icon:g.Home,sub:y.value,color:l.value.all,selected:u.value==="all",key:"all"},{type:"item",text:"\u6587\u7AE0",icon:g.Edit,sub:v.value,color:l.value.post,selected:u.value==="post",key:"post"},{type:"item",text:"\u9875\u9762",icon:g.Page,sub:c.value,color:l.value.page,selected:u.value==="page",key:"page"},{type:"item",text:"\u8349\u7A3F",icon:g.Read,sub:m.value,color:l.value.draft,selected:u.value==="draft",key:"draft"}]),R=p(()=>{const _=[{type:"title",label:"\u5206\u7C7B"}];function j(L,W=0){var P,K;_.push({type:"item",text:L.name,icon:g.Folder,color:n==null?void 0:n.value.color.folder,indent:W,sub:(P=L.posts)==null?void 0:P.length,key:"c-"+L.slug,selected:s.filter.type==="category"&&L.slug===s.filter.slug}),(K=L.children)==null||K.forEach(M=>j(M,W+1))}return a.categoriesTree.forEach(L=>j(L)),_}),$=p(()=>[...h,...F.value,...R.value]),A=_=>{_==="all"&&s.setFilter({type:"all"}),_==="post"&&s.setFilter({type:"post"}),_==="page"&&s.setFilter({type:"page"}),_==="draft"&&s.setFilter({type:"draft"}),_.slice(0,2)==="c-"&&s.setFilter({type:"category",slug:_.slice(2)}),_==="deploy"&&o.deploy(),_==="generate"&&o.generate(),_==="clean"&&o.clean(),_==="gitsync"&&o.gitSync(),_==="gitsave"&&o.gitSave()},U=()=>r.showSettingsModal();return(_,j)=>(i(),b("div",Qe,[f(Je),d("div",Ze,[d("div",et,[f(e(Ie),{model:e($),onOnSelect:A},null,8,["model"])])]),f(Ye,{onClick:U})]))}}),st=d("div",{class:"flex-1"},null,-1),ot=V({props:{modelValue:null},emits:["update:modelValue","on-add"],setup(t,{emit:a}){const s=t,{modelValue:o}=N(s),r=n=>a("update:modelValue",n);return(n,l)=>(i(),w(se,{class:"px-6"},{default:S(()=>[st,f(e(Re),{modelValue:e(o),"onUpdate:modelValue":r,type:"secondary",placeholder:"\u641C\u7D22",clearable:""},{prefix:S(()=>[f(e(E),{name:e(g).Search},null,8,["name"])]),_:1},8,["modelValue"]),f(e(J),{class:"ml-2",round:"",onClick:l[0]||(l[0]=h=>a("on-add"))},{default:S(()=>[f(e(E),{name:e(g).Add},null,8,["name"])]),_:1})]),_:1}))}});const at=["onContextmenu"],lt={class:"font-bold"},nt={key:0,class:"brief text-xs mt-1"},rt={key:1,class:"mt-0.5"},it=V({props:{article:null,selected:{type:Boolean,default:!1}},emits:["show-menu"],setup(t,{emit:a}){const s=t;ue(v=>({"4053f1d8":e(h).bgColor,"7543b1c8":e(h).hoverBgColor,"133e0472":e(h).activeBgColor,"7378a5f1":e(h).titleColor,d51a35e2:e(h).briefColor}));const o=fe(),{selected:r}=N(s),n=p(()=>ee(s.article.date).fromNow()),l=q(),h=p(()=>({bgColor:r.value?l.value.color.background.selected:l.value.color.background.transparent,hoverBgColor:l.value.color.background.hover,activeBgColor:l.value.color.background.active,titleColor:l.value.color.foreground.main,briefColor:l.value.color.foreground.sub})),y=v=>{a("show-menu",{article:s.article,e:v})};return(v,c)=>(i(),b("div",{class:"h-article-item px-4 py-2 select-none text-sm rounded-md mb-1",onContextmenu:de(y,["prevent"])},[d("div",{class:"title mb-3",style:C({color:e(o).textColorPrimary})},[t.article.type==="page"?(i(),w(e(E),{key:0,class:"mr-1",name:e(g).Page,style:C({color:e(o).colorPage})},null,8,["name","style"])):H("",!0),t.article.isDraft?(i(),w(e(E),{key:1,class:"mr-1",name:e(g).Read,style:C({color:e(o).colorDraft})},null,8,["name","style"])):H("",!0),d("span",lt,B(t.article.title),1)],4),t.article.brief?(i(),b("div",nt,B(t.article.brief),1)):H("",!0),t.article.tags.length?(i(),b("div",rt,[(i(!0),b(I,null,Y(t.article.tags,m=>(i(),w(e(oe),{class:"mr-1 mb-0.5",color:e(l).color.foreground.main,"bg-color":e(l).color.background.badge,key:m},{default:S(()=>[te(B(m),1)]),_:2},1032,["color","bg-color"]))),128))])):H("",!0),d("div",{class:"date mt-1 text-xs",style:C({color:e(l).color.primary.n})},B(e(n)),5)],40,at))}});var ct=me(it,[["__scopeId","data-v-205d57d4"]]);const ut={class:"font-bold"},dt={class:"mb-2"},pt={class:"text-md"},vt={class:"text-md"},mt={class:"text-sm"},ft={class:"text-sm"},yt={class:"flex justify-end"},gt=V({props:{position:null,show:{type:Boolean},article:null},emits:["update:show"],setup(t,{emit:a}){const s=t,o=T(),r=D(null),n=D(null);De(r,()=>{a("update:show",!1)}),Pe(n,()=>{a("update:show",!1)});const l=fe(),h=p(()=>({top:`${s.position.y}px`,left:`${s.position.x}px`,backgroundColor:l.value.backgroundColorPrimary})),{classNames:y}=Le("h-article-menu"),v=m=>{switch(a("update:show",!1),m){case"edit":o.editArticle({type:s.article.type,source:s.article.source});break;case"delete":o.deleteArticle({type:s.article.type,source:s.article.source});break;case"publish":o.publishArticle(s.article.source);break}},c=m=>m?m.format(Te):"";return(m,u)=>(i(),b(I,null,[d("div",{class:"hidden",ref_key:"anchorRef",ref:n},null,512),(i(),w(Fe,{to:"body"},[f(Me,null,{default:S(()=>{var F,R;return[t.show&&s.article?(i(),b("div",{key:0,ref_key:"containerRef",ref:r,class:Ee(["w-60 fixed rounded-md shadow p-2",e(y)]),style:C(e(h)),onContextmenu:u[3]||(u[3]=de(()=>{},["prevent"]))},[d("div",{class:"title mt-2 mb-4",style:C({color:e(l).textColorPrimary})},[t.article.type==="page"?(i(),w(e(E),{key:0,class:"mr-1",name:e(g).Page,style:C({color:e(l).colorPage})},null,8,["name","style"])):H("",!0),t.article.isDraft?(i(),w(e(E),{key:1,class:"mr-1",name:e(g).Read,style:C({color:e(l).colorDraft})},null,8,["name","style"])):H("",!0),d("span",ut,B(t.article.title),1)],4),d("div",dt,[d("div",pt,B(`\u53D1\u5E03\u4E8E ${c(t.article.date)}`),1),d("div",vt,B(`\u66F4\u65B0\u4E8E ${c(t.article.updated)}`),1)]),((F=t.article.categories)==null?void 0:F.length)?(i(),b(I,{key:0},[f(e(ae),{class:"my-0.5"}),d("div",mt,[(i(!0),b(I,null,Y(t.article.categories,($,A)=>(i(),b(I,null,[A?(i(),w(e(E),{key:0,class:"mb-0.5",name:e(g).ChevronRight},null,8,["name"])):H("",!0),f(e(oe),{class:"mb-0.5",rounded:""},{default:S(()=>[te(B($),1)]),_:2},1024)],64))),256))])],64)):H("",!0),((R=t.article.tags)==null?void 0:R.length)?(i(),b(I,{key:1},[f(e(ae),{class:"my-0.5"}),d("div",ft,[(i(!0),b(I,null,Y(t.article.tags,$=>(i(),w(e(oe),{class:"mr-1"},{default:S(()=>[te(B($),1)]),_:2},1024))),256))])],64)):H("",!0),f(e(ae),{class:"mt-1 mb-2"}),d("div",yt,[f(e(J),{class:"ml-1",inverted:"",size:"small",round:"",onClick:u[0]||(u[0]=$=>v("edit"))},{default:S(()=>[f(e(E),{name:e(g).Edit},null,8,["name"])]),_:1}),f(e(J),{class:"ml-1",type:"error",inverted:"",size:"small",round:"",onClick:u[1]||(u[1]=$=>v("delete"))},{default:S(()=>[f(e(E),{name:e(g).Delete},null,8,["name"])]),_:1}),t.article.isDraft?(i(),w(e(J),{key:0,class:"ml-1",type:"success",inverted:"",size:"small",round:"",onClick:u[2]||(u[2]=$=>v("publish"))},{default:S(()=>[f(e(E),{name:e(g).Upload},null,8,["name"])]),_:1})):H("",!0)])],38)):H("",!0)]}),_:1})]))],64))}});function ht(t){return t.sort((a,s)=>{const o=ee(a.date),r=ee(s.date);return o.isValid()?r.isValid()&&o.valueOf()>r.valueOf()?-1:1:-1})}const _t={class:"h-article-list px-3 py-2"},xt=V({props:{articles:null,selected:null},emits:["on-click"],setup(t,{emit:a}){const s=t,{selected:o}=N(s),r=p(()=>ht(s.articles)),n=D({x:0,y:0}),l=D(!1),h=D(null),y=c=>{n.value.x=c.pageX,n.value.y=c.pageY,l.value=!0},v=c=>{h.value=c.article,y(c.e)};return(c,m)=>(i(),b("div",_t,[(i(!0),b(I,null,Y(e(r),u=>(i(),w(ct,{article:u,selected:e(o)===u.source,onClick:F=>a("on-click",{source:u.source,type:u.type}),onShowMenu:v},null,8,["article","selected","onClick"]))),256)),f(gt,{position:n.value,show:l.value,"onUpdate:show":m[0]||(m[0]=u=>l.value=u),article:h.value},null,8,["position","show","article"])]))}}),bt=V({setup(t){const a=pe(),s=Be(),o=T(),r=ge(),n=p(()=>r.articleFilter),l=p(()=>n.value(a.articles)),h=p(()=>l.value.map(c=>{const m={title:c.title,brief:c.brief,date:ye(c.date),updated:ye(c.updated),source:c.source,type:z(c)?"post":"page",isDraft:ve(c),tags:[],categories:[]};return z(c)&&(m.tags=c.tags.map(u=>a.tags[u].name),m.categories=c.categories.map(u=>a.categories[u].name)),m})),y=p(()=>decodeURIComponent(s.params.source)),v=({source:c,type:m})=>{c===y.value?o.goHome():o.viewArticle({source:c,type:m})};return(c,m)=>(i(),w(xt,{articles:e(h),selected:e(y),onOnClick:v},null,8,["articles","selected"]))}}),wt={class:"bg-base-2 flex flex-col w-full h-full"},Ct={class:"overflow-auto flex-1"},St={class:"bg-base-1 w-full h-full"},At=V({setup(t){const a=T();He(()=>{a.loadBlogData()});const s=D(200),o=D(320),r={sep1:{min:150,max:300},sep2:{min:200,max:500}},n=D(""),l=()=>a.showCreateArticleModal();return(h,y)=>(i(),w(e(ze),{sep1at:s.value,"onUpdate:sep1at":y[1]||(y[1]=v=>s.value=v),sep2at:o.value,"onUpdate:sep2at":y[2]||(y[2]=v=>o.value=v),sep1:r.sep1,sep2:r.sep2,class:"h-full w-full"},{first:S(()=>[f(tt)]),second:S(()=>[d("div",wt,[f(ot,{modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=v=>n.value=v),class:"flex-shrink-0",onOnAdd:l},null,8,["modelValue"]),d("div",Ct,[f(bt)])])]),third:S(()=>[d("div",St,[f(e(Ve))])]),_:1},8,["sep1at","sep2at","sep1","sep2"]))}});export{At as default};
